{"version":3,"sources":["../../../src/postgresql/statements/InsertStatementCreator.js"],"names":["InsertStatementCreator","constructor","entity","tableName","primaryKeys","createStatement","options","insertStatementCreator","keys","Object","values","map","key","escapedKeys","PgSQLUtils","escapeName","placeHolderArray","item","index","join","sql"],"mappings":";;;;;;;AAAA;;;;AAEe,MAAMA,sBAAN,CAA6B;AAC1CC,EAAAA,WAAW,CAAC;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,SAAV;AAAqBC,IAAAA;AAArB,GAAD,EAAqC;AAC9C,SAAKF,MAAL,GAAcA,MAAd;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACD;;AAED,SAAOC,eAAP,CAAuBC,OAAvB,EAAgC;AAC9B,UAAMC,sBAAsB,GAAG,IAAIP,sBAAJ,CAA2BM,OAA3B,CAA/B;AACA,WAAOC,sBAAsB,CAACF,eAAvB,EAAP;AACD;;AAEDA,EAAAA,eAAe,GAAG;AAChB,UAAMH,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMM,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYN,MAAZ,CAAb;AACA,UAAMQ,MAAM,GAAGF,IAAI,CAACG,GAAL,CAASC,GAAG,IAAI;AAC7B,aAAOV,MAAM,CAACU,GAAD,CAAb;AACD,KAFc,CAAf;AAIA,UAAMC,WAAW,GAAGL,IAAI,CAACG,GAAL,CAASC,GAAG,IAAI;AAClC,aAAOE,yBAAWC,UAAX,CAAsBH,GAAtB,CAAP;AACD,KAFmB,CAApB;AAIA,UAAMI,gBAAgB,GAAGR,IAAI,CAC1BG,GADsB,CAClB,CAACM,IAAD,EAAOC,KAAP,KAAkB,IAAGA,KAAK,GAAG,CAAE,EADb,EAEtBC,IAFsB,CAEjB,IAFiB,CAAzB;AAIA,WAAO;AACLC,MAAAA,GAAG,EAAG,eAAcN,yBAAWC,UAAX,CAClB,KAAKZ,SADa,CAElB,MAAKU,WAAW,CAACM,IAAZ,CAAiB,IAAjB,CAAuB,eAAcH,gBAAiB,gBAHxD;AAILN,MAAAA,MAAM,EAAEA;AAJH,KAAP;AAMD;;AAjCyC","sourcesContent":["import PgSQLUtils from \"../utils/PostgreSQLUtils\";\n\nexport default class InsertStatementCreator {\n  constructor({ entity, tableName, primaryKeys }) {\n    this.entity = entity;\n    this.tableName = tableName;\n    this.primaryKeys = primaryKeys;\n  }\n\n  static createStatement(options) {\n    const insertStatementCreator = new InsertStatementCreator(options);\n    return insertStatementCreator.createStatement();\n  }\n\n  createStatement() {\n    const entity = this.entity;\n    const keys = Object.keys(entity);\n    const values = keys.map(key => {\n      return entity[key];\n    });\n\n    const escapedKeys = keys.map(key => {\n      return PgSQLUtils.escapeName(key);\n    });\n\n    const placeHolderArray = keys\n      .map((item, index) => `$${index + 1}`)\n      .join(\", \");\n    \n    return {\n      sql: `INSERT INTO ${PgSQLUtils.escapeName(\n        this.tableName\n      )} ( ${escapedKeys.join(\", \")} ) VALUES ( ${placeHolderArray} ) RETURNING *`,\n      values: values\n    };\n  }\n}\n"],"file":"InsertStatementCreator.js"}