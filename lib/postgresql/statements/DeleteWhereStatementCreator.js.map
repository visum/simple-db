{"version":3,"sources":["../../../src/postgresql/statements/DeleteWhereStatementCreator.js"],"names":["DeleteWhereStatementCreator","constructor","queryable","Error","createStatement","deleteWhereStatementCreator","getTableName","PgSQLUtils","escapeName","query","type","createDeleteSql","createWhereSql","visitor","SqlVisitor","createWhereExpression","expression","deleteSql","whereSql","sql","values"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEe,MAAMA,2BAAN,CAAkC;AAC7CC,EAAAA,WAAW,CAACC,SAAD,EAAY;AAEnB,QAAIA,SAAS,IAAI,IAAjB,EAAuB;AACnB,YAAM,IAAIC,KAAJ,CAAU,4DAAV,CAAN;AACH;;AAED,SAAKD,SAAL,GAAiBA,SAAjB;AACH;;AAED,SAAOE,eAAP,CAAuBF,SAAvB,EAAiC;AAC7B,UAAMG,2BAA2B,GAAG,IAAIL,2BAAJ,CAAgCE,SAAhC,CAApC;AACA,WAAOG,2BAA2B,CAACD,eAA5B,EAAP;AACH;;AAEDE,EAAAA,YAAY,GAAE;AACV,WAAOC,yBAAWC,UAAX,CAAsB,KAAKN,SAAL,CAAeO,KAAf,CAAqBC,IAA3C,CAAP;AACH;;AAEDC,EAAAA,eAAe,GAAG;AACd,WAAQ,eAAc,KAAKL,YAAL,EAAoB,EAA1C;AACH;;AAEDM,EAAAA,cAAc,GAAG;AACb,UAAMC,OAAO,GAAG,IAAIC,mBAAJ,EAAhB;AACA,WAAOD,OAAO,CAACE,qBAAR,CAA8B,KAAKb,SAAL,CAAeO,KAAf,CAAqBO,UAAnD,CAAP;AACH;;AAEDZ,EAAAA,eAAe,GAAG;AACd,UAAMa,SAAS,GAAG,KAAKN,eAAL,EAAlB;AACA,UAAMO,QAAQ,GAAG,KAAKN,cAAL,EAAjB;AAEA,QAAIO,GAAG,GAAGF,SAAV;;AAEA,QAAIC,QAAQ,IAAI,EAAhB,EAAoB;AAChBC,MAAAA,GAAG,GAAI,GAAEA,GAAI,IAAGD,QAAS,EAAzB;AACH;;AAED,WAAO;AACHC,MAAAA,GADG;AAEHC,MAAAA,MAAM,EAAE;AAFL,KAAP;AAIH;;AA1C4C","sourcesContent":["import SqlVisitor from \"../visitors/SqlVisitor\";\nimport PgSQLUtils from \"../utils/PostgreSQLUtils\";\n\nexport default class DeleteWhereStatementCreator {\n    constructor(queryable) {\n\n        if (queryable == null) {\n            throw new Error(\"Null Exception: A queryable is needed to create statement.\");\n        }\n\n        this.queryable = queryable;\n    }\n\n    static createStatement(queryable){\n        const deleteWhereStatementCreator = new DeleteWhereStatementCreator(queryable);\n        return deleteWhereStatementCreator.createStatement();\n    }\n\n    getTableName(){\n        return PgSQLUtils.escapeName(this.queryable.query.type);\n    }\n\n    createDeleteSql() {\n        return `DELETE FROM ${this.getTableName()}`;\n    }\n\n    createWhereSql() {\n        const visitor = new SqlVisitor();\n        return visitor.createWhereExpression(this.queryable.query.expression);\n    }\n\n    createStatement() {\n        const deleteSql = this.createDeleteSql();\n        const whereSql = this.createWhereSql();\n\n        let sql = deleteSql;\n\n        if (whereSql != \"\") {\n            sql = `${sql} ${whereSql}`;\n        }\n\n        return {\n            sql,\n            values: []\n        }\n    }\n\n}"],"file":"DeleteWhereStatementCreator.js"}