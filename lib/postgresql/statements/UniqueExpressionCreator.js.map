{"version":3,"sources":["../../../src/postgresql/statements/UniqueExpressionCreator.js"],"names":["UniqueExpressionCreator","constructor","unique","columns","conflictOption","createConflictResolution","createUniqueExpression","map","column","PgSQLUtils","escapeName","createExpression","expression","uniqueExpression","conflictOptions","push","join"],"mappings":";;;;;;;AAAA;;;;AAEe,MAAMA,uBAAN,CAA8B;AACzCC,EAAAA,WAAW,CAACC,MAAD,EAAS;AAChB,SAAKA,MAAL,GAAcA,MAAM,IAAI;AAAEC,MAAAA,OAAO,EAAE,EAAX;AAAeC,MAAAA,cAAc,EAAE;AAA/B,KAAxB;AACH;;AAEDC,EAAAA,wBAAwB,GAAG;AACvB,QAAI,KAAKH,MAAL,CAAYE,cAAZ,IAA8B,IAAlC,EAAwC;AACpC,aAAO,EAAP;AACH;;AACD,WAAO,KAAKF,MAAL,CAAYE,cAAnB;AACH;;AAEDE,EAAAA,sBAAsB,GAAG;AACrB,UAAMH,OAAO,GAAG,KAAKD,MAAL,CAAYC,OAAZ,CAAoBI,GAApB,CAAyBC,MAAD,IAAY;AAChD,aAAOC,yBAAWC,UAAX,CAAsBF,MAAtB,CAAP;AACH,KAFe,CAAhB;AAIA,WAAQ,WAAUL,OAAQ,GAA1B;AACH;;AAEDQ,EAAAA,gBAAgB,GAAG;AACf,UAAMC,UAAU,GAAG,EAAnB;AACA,UAAMC,gBAAgB,GAAG,KAAKP,sBAAL,EAAzB;AACA,UAAMQ,eAAe,GAAG,KAAKT,wBAAL,EAAxB;AAEAO,IAAAA,UAAU,CAACG,IAAX,CAAgBF,gBAAhB;;AAEA,QAAIC,eAAe,IAAI,EAAvB,EAA2B;AACvBF,MAAAA,UAAU,CAACG,IAAX,CAAiB,eAAcD,eAAgB,EAA/C;AACH;;AAED,WAAOF,UAAU,CAACI,IAAX,CAAgB,GAAhB,CAAP;AACH;;AAhCwC","sourcesContent":["import PgSQLUtils from \"../utils/PostgreSQLUtils\";\n\nexport default class UniqueExpressionCreator {\n    constructor(unique) {\n        this.unique = unique || { columns: [], conflictOption: null };\n    }\n\n    createConflictResolution() {\n        if (this.unique.conflictOption == null) {\n            return \"\";\n        }\n        return this.unique.conflictOption;\n    }\n\n    createUniqueExpression() {\n        const columns = this.unique.columns.map((column) => {\n            return PgSQLUtils.escapeName(column);\n        });\n\n        return `UNIQUE (${columns})`;\n    }\n\n    createExpression() {\n        const expression = [];\n        const uniqueExpression = this.createUniqueExpression();\n        const conflictOptions = this.createConflictResolution();\n\n        expression.push(uniqueExpression);\n\n        if (conflictOptions != \"\") {\n            expression.push(`ON CONFLICT ${conflictOptions}`);\n        }\n\n        return expression.join(\" \");\n    }\n\n}"],"file":"UniqueExpressionCreator.js"}