{"version":3,"sources":["../../../src/sqlite/statements/AbstractStatementCreator.js"],"names":["AbstractStatementCreator","constructor","entity","tableName","primaryKeys","createWhereExpression","columns","map","key","SqliteUtils","escapeName","escapeValue","join","validateEntityPrimaryKeys","length","every"],"mappings":";;;;;;;AAAA;;;;AAEe,MAAMA,wBAAN,CAA+B;AAC1CC,EAAAA,WAAW,CAAC;AACRC,IAAAA,MADQ;AAERC,IAAAA,SAFQ;AAGRC,IAAAA;AAHQ,GAAD,EAIR;AACC,SAAKF,MAAL,GAAcA,MAAd;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACH;;AAEDC,EAAAA,qBAAqB,GAAG;AACpB,UAAMH,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMI,OAAO,GAAG,KAAKF,WAAL,CAAiBG,GAAjB,CAAsBC,GAAD,IAAS;AAC1C,aAAQ,GAAEC,qBAAYC,UAAZ,CAAuBF,GAAvB,CAA4B,MAAKC,qBAAYE,WAAZ,CAAwBT,MAAM,CAACM,GAAD,CAA9B,CAAqC,EAAhF;AACH,KAFe,EAEbI,IAFa,CAER,OAFQ,CAAhB;AAIA,WAAQ,SAAQN,OAAQ,EAAxB;AACH;;AAEDO,EAAAA,yBAAyB,GAAG;AACxB,UAAMX,MAAM,GAAG,KAAKA,MAApB;;AACA,QAAI,KAAKE,WAAL,CAAiBU,MAAjB,KAA4B,CAAhC,EAAmC;AAC/B,aAAOZ,MAAM,CAAC,KAAKE,WAAL,CAAiB,CAAjB,CAAD,CAAN,IAA+B,IAAtC;AACH,KAFD,MAEO,IAAI,KAAKA,WAAL,CAAiBU,MAAjB,GAA0B,CAA9B,EAAiC;AACpC,aAAO,KAAKV,WAAL,CAAiBW,KAAjB,CAAwBP,GAAD,IAAS;AACnC,eAAO,OAAON,MAAM,CAACM,GAAD,CAAb,KAAuB,WAA9B;AACH,OAFM,CAAP;AAGH,KAJM,MAIA;AACH,aAAO,KAAP;AACH;AACJ;;AA/ByC","sourcesContent":["import SqliteUtils from \"../utils/SqliteUtils\";\n\nexport default class AbstractStatementCreator {\n    constructor({\n        entity,\n        tableName,\n        primaryKeys\n    }) {\n        this.entity = entity;\n        this.tableName = tableName;\n        this.primaryKeys = primaryKeys;\n    }\n\n    createWhereExpression() {\n        const entity = this.entity;\n        const columns = this.primaryKeys.map((key) => {\n            return `${SqliteUtils.escapeName(key)} = ${SqliteUtils.escapeValue(entity[key])}`;\n        }).join(\" AND \");\n\n        return `WHERE ${columns}`;\n    }\n\n    validateEntityPrimaryKeys() {\n        const entity = this.entity;\n        if (this.primaryKeys.length === 1) {\n            return entity[this.primaryKeys[0]] != null;\n        } else if (this.primaryKeys.length > 1) {\n            return this.primaryKeys.every((key) => {\n                return typeof entity[key] !== \"undefined\";\n            })\n        } else {\n            return false;\n        }\n    }\n\n}"],"file":"AbstractStatementCreator.js"}